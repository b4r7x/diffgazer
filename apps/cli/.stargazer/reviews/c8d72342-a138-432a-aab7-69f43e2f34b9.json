{
  "metadata": {
    "id": "c8d72342-a138-432a-aab7-69f43e2f34b9",
    "projectPath": "/Users/voitz/Projects/stargazer/apps/cli",
    "createdAt": "2026-01-24T21:42:09.876Z",
    "staged": false,
    "branch": "feature/review-bounding",
    "overallScore": null,
    "issueCount": 0,
    "criticalCount": 0,
    "warningCount": 0
  },
  "result": {
    "summary": "```json\n{\n  \"summary\": \"This diff introduces a substantial refactor and feature enhancement across the CLI, core AI review logic, and API. Key improvements include a wizard-driven user experience for onboarding and settings, a new project trust management system for enhanced security, and significantly enriched AI review output with detailed evidence and traceability. The UI components have been modernized with split-pane views and theme support. While the changes are overwhelmingly positive, a few minor issues regarding code duplication and an unimplemented API route were noted.\",\n  \"issues\": [\n    {\n      \"severity\": \"nitpick\",\n      \"category\": \"style\",\n      \"file\": \"apps/cli/src/app/screens/onboarding-screen.tsx\",\n      \"line\": 39,\n      \"title\": \"Duplicate `PROVIDER_ENV_VARS` constant\",\n      \"description\": \"The `PROVIDER_ENV_VARS` constant is defined in both `onboarding-screen.tsx` and `settings-screen.tsx`. Duplicating constants can lead to inconsistencies if updates are required in the future.\",\n      \"suggestion\": \"Centralize the `PROVIDER_ENV_VARS` constant in a shared utility file or within the `@repo/schemas/config` package to ensure a single source of truth.\"\n    },\n    {\n      \"severity\": \"warning\",\n      \"category\": \"logic\",\n      \"file\": \"apps/server/src/api/routes/index.ts\",\n      \"line\": 6,\n      \"title\": \"`settings` route imported but not provided in diff\",\n      \"description\": \"The `apps/server/src/api/routes/index.ts` file imports `settings` and registers a route for it, but the `apps/server/src/api/routes/settings.ts` file containing its implementation is not included in this diff. This means the `/settings` API endpoint is currently unimplemented or relies on an external, unreviewed file.\",\n      \"suggestion\": \"Ensure the `apps/server/src/api/routes/settings.ts` file is created and contains the necessary Hono routes for managing user settings, or include it in the current diff for a complete review.\"\n    },\n    {\n      \"severity\": \"suggestion\",\n      \"category\": \"best-practice\",\n      \"file\": \"apps/cli/src/hooks/use-config.ts\",\n      \"line\": 28,\n      \"title\": \"Deprecated `useConfig` still in core usage without immediate replacement\",\n      \"description\": \"The `useConfig` hook is marked as `@deprecated` with a comment suggesting a move to `useSettingsState`. However, this hook is still heavily utilized across critical application components (`App.tsx`, `use-app-state.ts`, `use-app-init.ts`). The intended replacement is not provided or integrated within this diff, leading to a state of partial refactoring and potential confusion for developers.\",\n      \"suggestion\": \"Either complete the migration to the new settings state management (`useSettingsState`) within this change, or temporarily remove the `@deprecated` tag until the replacement is fully ready and integrated to avoid inconsistency.\"\n    },\n    {\n      \"severity\": \"suggestion\",\n      \"category\": \"logic\",\n      \"file\": \"apps/cli/src/app/views/review-view.tsx\",\n      \"line\": 31,\n      \"title\": \"Implicit schema adaptation from `ReviewIssue` to `TriageIssue`\",\n      \"description\": \"The `ReviewView` component now includes helper functions (`adaptReviewIssueToTriageIssue`, `mapReviewSeverityToTriage`, `mapReviewCategoryToTriage`) to convert objects from `ReviewIssue` to the richer `TriageIssue` schema. This suggests that `ReviewIssue` might be an older or simplified schema still in use elsewhere, requiring runtime conversion. It would be cleaner if the system consistently used `TriageIssue` where possible.\",\n      \"suggestion\": \"Investigate if `ReviewIssue` can be fully replaced by `TriageIssue` in upstream data sources or API responses to eliminate the need for this conversion. If both schemas must coexist, consider abstracting this adaptation into a dedicated adapter module for better separation of concerns and clarity.\"\n    },\n    {\n      \"severity\": \"nitpick\",\n      \"category\": \"best-practice\",\n      \"file\": \"apps/cli/src/app/screens/settings-screen.tsx\",\n      \"line\": 79,\n      \"title\": \"Hardcoded `DEFAULT_CAPABILITIES` in `SettingsScreen`\",\n      \"description\": \"The `DEFAULT_CAPABILITIES` for project trust are hardcoded directly within the `SettingsScreen` component. If these default permissions need to evolve (e.g., adding new capabilities), this specific UI component would require direct modification.\",\n      \"suggestion\": \"Consider moving `DEFAULT_CAPABILITIES` to a shared configuration file or a schema definition. This would centralize trust-related defaults, making them easier to manage and update across the application.\"\n    }\n  ],\n  \"overallScore\": 9\n}\n```",
    "issues": [],
    "overallScore": null
  },
  "gitContext": {
    "branch": "feature/review-bounding",
    "fileCount": 34
  }
}
